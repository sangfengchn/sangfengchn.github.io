<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Toolbox on Sang Feng | 桑峰</title>
    <link>//localhost:4321/categories/toolbox/</link>
    <description>Recent content in Toolbox on Sang Feng | 桑峰</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Sun, 07 Nov 2021 00:00:00 +0000</lastBuildDate>
    <atom:link href="//localhost:4321/categories/toolbox/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Toolbox for WMH</title>
      <link>//localhost:4321/post/2021/11/07/blog/</link>
      <pubDate>Sun, 07 Nov 2021 00:00:00 +0000</pubDate>
      <guid>//localhost:4321/post/2021/11/07/blog/</guid>
      <description>&lt;h2 id=&#34;介绍&#34;&gt;介绍&lt;/h2&gt;&#xA;&lt;p&gt;白质高信号（white matter hyperintensity, WMH）是一种因脑白质病变导致的、在T2 Flari像上表现为高灰质值的现象。在相关研究中，确定白质高信号区域是一个基本的问题。一般认为，由专业的影像科医生或受过培训的人员手动分割的结果是金标准。然而，手动分割费时费力。因而，研究者提出了许多自动半自动的分割工具。本文将对几种常用的白质高信号自动分割工具的用法进行简单介绍。&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;./img/fig_01.png&#34; alt=&#34;&#34;&gt;&lt;!-- --&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;lst&#34;&gt;LST&lt;/h2&gt;&#xA;&lt;p&gt;LST (&lt;a href=&#34;https://www.applied-statistics.de/lst.html&#34;&gt;https://www.applied-statistics.de/lst.html&lt;/a&gt;) 是基于SPM的白质高信号分割工具，它包含两个分割算法：LPA和LGA。其中，LPA不需要T1数据，而LGA需要T1和Flari数据。&lt;/p&gt;&#xA;&lt;p&gt;代码入下：&lt;/p&gt;&#xA;&lt;h3 id=&#34;lpa&#34;&gt;LPA&lt;/h3&gt;&#xA;&lt;p&gt;尽管LPA在分割WMH的时候不需要T1数据，然而在输入里面还是可以将T1数据输入，用来作为配准的参考图像。&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code class=&#34;language-matlab&#34;&gt;% WMH segment by LPA in LST.&#xA;close all; clear; clc;&#xA;&#xA;% Set SPM12 into Path.&#xA;SPM_PATH = &#39;~/Tools/spm12&#39;;&#xA;addpath(SPM_PATH);&#xA;&#xA;% Set root path.&#xA;ROOT = &#39;Work&#39;;&#xA;&#xA;subs = dir(ROOT);&#xA;subs = subs(3:end);&#xA;for i = 1:numel(subs)&#xA;    % for single subject.&#xA;    disp(subs(i).name);&#xA;    sub_path = fullfile(ROOT, subs(i).name);&#xA;    &#xA;    t1_path = fullfile(sub_path, &#39;t1.nii&#39;);&#xA;    if ~exist(t1_path, &#39;file&#39;)&#xA;        % gunzip the .gz file.&#xA;        gunzip(fullfile(sub_path, &#39;t1.nii.gz&#39;));&#xA;    end&#xA;    flair_path = fullfile(sub_path, &#39;flair.nii&#39;);&#xA;    if ~exist(flair_path, &#39;file&#39;)&#xA;        gunzip(fullfile(sub_path, &#39;flair.nii.gz&#39;));&#xA;    end&#xA;    &#xA;    pause(10);&#xA;    &#xA;    spm_jobman(&#39;initcfg&#39;);&#xA;    matlabbatch{1}.spm.tools.LST.lpa.data_F2 = {strcat(flair_path, &#39;,1&#39;)};&#xA;    matlabbatch{1}.spm.tools.LST.lpa.data_coreg = {strcat(t1_path, &#39;,1&#39;)};&#xA;    matlabbatch{1}.spm.tools.LST.lpa.html_report = 1;&#xA;    spm(&#39;defaults&#39;, &#39;pet&#39;);&#xA;    spm_jobman(&#39;run&#39;, matlabbatch);&#xA;    clear matlabbatch;&#xA;end&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h3 id=&#34;lga&#34;&gt;LGA&lt;/h3&gt;&#xA;&lt;pre&gt;&lt;code class=&#34;language-matlab&#34;&gt;% WMH segment by LGA in LST.&#xA;close all; clear; clc;&#xA;&#xA;% Set SPM12 into Path.&#xA;SPM_PATH = &#39;/home/babri3/Tools/spm12&#39;;&#xA;addpath(SPM_PATH)&#xA;&#xA;% Set root path.&#xA;ROOT = &#39;Work&#39;;&#xA;&#xA;&#xA;subs = dir(ROOT);&#xA;subs = subs(3:end);&#xA;for i = 1:numel(subs)&#xA;    % for single subject.&#xA;    disp(subs(i).name);&#xA;    sub_path = fullfile(ROOT, subs(i).name);&#xA;    &#xA;    t1_path = fullfile(sub_path, &#39;t1.nii&#39;);&#xA;    if ~exist(t1_path, &#39;file&#39;)&#xA;        % gunzip the .gz &#xA;        gunzip(fullfile(sub_path, &#39;t1.nii.gz&#39;));&#xA;    end&#xA;    flair_path = fullfile(sub_path, &#39;flair.nii&#39;);&#xA;    if ~exist(flair_path, &#39;file&#39;)&#xA;        gunzip(fullfile(sub_path, &#39;flair.nii.gz&#39;));&#xA;    end&#xA;    pause(10);&#xA;    disp(t1_path);&#xA;    disp(flair_path);&#xA;    spm_jobman(&#39;initcfg&#39;);&#xA;   %-----------------------------------------------------------------------&#xA;    % Job saved on 29-Sep-2020 18:30:58 by cfg_util (rev $Rev: 6942 $)&#xA;    % spm SPM - SPM12 (7219)&#xA;    % cfg_basicio BasicIO - Unknown&#xA;    %-----------------------------------------------------------------------&#xA;    matlabbatch{1}.spm.tools.LST.lga.data_T1 = {strcat(t1_path, &#39;,1&#39;)};&#xA;    matlabbatch{1}.spm.tools.LST.lga.data_F2 = {strcat(flair_path, &#39;,1&#39;)};&#xA;    matlabbatch{1}.spm.tools.LST.lga.opts_lga.initial = 0.3;&#xA;    matlabbatch{1}.spm.tools.LST.lga.opts_lga.mrf = 1;&#xA;    matlabbatch{1}.spm.tools.LST.lga.opts_lga.maxiter = 50;&#xA;    matlabbatch{1}.spm.tools.LST.lga.html_report = 1;&#xA;    spm(&#39;defaults&#39;,&#39;pet&#39;);&#xA;    spm_jobman(&#39;run&#39;, matlabbatch);&#xA;    clear matlabbatch;&#xA;end&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;bianca&#34;&gt;BIANCA&lt;/h2&gt;&#xA;&lt;p&gt;BIANCA (&lt;a href=&#34;https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/BIANCA&#34;&gt;https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/BIANCA&lt;/a&gt;) 是一种基于监督学习的WMH分割工具，是FSL的一个子模块。在使用它之前，需要先得到一部分被试的分割结果作为训练数据。可用其他的自动化分割方法的结果作为训练数据。&lt;/p&gt;</description>
    </item>
    <item>
      <title>一周小结</title>
      <link>//localhost:4321/post/2021/08/30/blog/</link>
      <pubDate>Mon, 30 Aug 2021 00:00:00 +0000</pubDate>
      <guid>//localhost:4321/post/2021/08/30/blog/</guid>
      <description>&lt;p&gt;本文记录了上周笔者在使用GRETNA和CAT12中遇到的一些问题和想法。&lt;/p&gt;&#xA;&lt;h1 id=&#34;gretna&#34;&gt;GRETNA&lt;/h1&gt;&#xA;&lt;p&gt;GRETNA是脑网络中进行图论分析的一款工具包。它也支持对于静息态功能磁共振成像(fMRI)数据的预处理。在fMRI数据的网络拓扑分析中，最常见的网络建模方式是功能连接网络。其中，网络的节点表示脑区，而网络连边表示不同脑区BOLD信号时间序列的相关值——相关值越高，表明两个脑区连接越紧密。&lt;/p&gt;&#xA;&lt;p&gt;网络中连边值的问题是重要的，因为在另外一些网络中，网络连边值越高表明两个节点之间的代价越高。例如在公路网络中，节点为不同的城市，连边表示不同城市之间的距离。&lt;/p&gt;&#xA;&lt;p&gt;在GRETNA计算网络的平均距离时，在得到距离矩阵后进行了取倒数的操作。这一步，对于相关系数网络，即连边值越到，节点连接越紧密的加权网络而言是合适的。因为距离矩阵中的值表示的含义是两个节点之间的最短路径的权重和。它的值越大，表明两个节点连接越紧密。为了与通常的距离越远，代价越高的认知相一致，取倒数后就保证了连接越紧密的节点，它们的“距离”也越短。&lt;/p&gt;&#xA;&lt;p&gt;但对于二值网络而言，两个节点的距离是其最短路径中边的条数，也就是距离矩阵中的值的含义。节点距离越近，它们的连边条数也越少，“距离”也越短。因此这里不应该在进行取倒数的操作。&lt;/p&gt;&#xA;&lt;h1 id=&#34;cat12&#34;&gt;CAT12&lt;/h1&gt;&#xA;&lt;p&gt;使用CAT12中的Segment模块进行皮层构建时，默认会得到个体皮层厚度的文件。如果要进行SBM分析，还需要将个体皮层厚度文件转换到标准空间(fsaverage)中，这一步在CAT12中是包含在resample模块中的。&lt;/p&gt;&#xA;&lt;p&gt;另外，CAT12也提供了提取ROI上相关指标的功能。它在提取ROI指标时，也是将个体的指标文件转换到标准空间中，再计算图谱文件(annotation)定义的ROI的指标。这里个体指标转换到标准空间使用的也是resample模块，不过这里的平滑核是0. 这也是容易理解的，因为在计算ROI指标时，会平均整个ROI中所有的Vertex。这样由于个体指标再转换到标准空间中产生的误差就会被平均掉。而在进行SBM分析时，因为是逐Vertex进行的统计，上面的误差就会对统计产生影响，因此在SBM中，resample并且设置合适的平滑核大小是重要的。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
