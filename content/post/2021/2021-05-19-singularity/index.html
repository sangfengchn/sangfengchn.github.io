---
title: Singularity-01-安装
author: 桑峰
date: 2021-05-19
slug: blog
output: html_document
categories:
  - 服务器
tags:
  - singularity
  - install
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<p>简单来讲，Singularity是一种可以跨平台执行的小型虚拟机。在数据分析时，首先往往要搭建运行环境，比如R，python等。为了保证结果的可靠性，通常要保证跨设备环境的一致性。但是在跨运算设备之间搭建相同的环境是一项比较麻烦的事情。因此，如果只搭建一次环境，就可以在各个设备上使用，就比较轻松了。Singularity和Docker就提供了这样的功能。笔者在这里使用Singularity[1]，版本为2.4.6。</p>
<div id="安装依赖库" class="section level2">
<h2>安装依赖库</h2>
<div id="ubuntu" class="section level3">
<h3>Ubuntu</h3>
<pre class="bash"><code>sudo apt-get update
sudo apt-get install python dh-autoreconf build-essential libarchive-dev</code></pre>
</div>
<div id="centos" class="section level3">
<h3>CentOS</h3>
<pre class="bash"><code>sudo yum update
sudo yum groupinstall &#39;Development Tools&#39;
sudo yum install libarchive-devel</code></pre>
</div>
</div>
<div id="编译安装" class="section level2">
<h2>编译安装</h2>
<pre class="bash"><code>VER=2.4.6
wget https://github.com/singularityware/singularity/releases/download/$VER/singularity-$VER.tar.gz
tar xvf singularity-$VER.tar.gz
cd singularity-$VER
./autogen.sh
./configure --prefix=&quot;/usr/local/singularity-${VER}&quot;
make
sudo make install</code></pre>
<p>将<strong>/usr/local/singularity-2.4.6/bin</strong>添加进<strong>$PATH</strong>并重新加载配置文件。</p>
<pre class="bash"><code>echo &quot;export $PATH=/usr/local/singularity-2.4.6/bin:$PATH&quot; &gt; ~/.bashrc
source ~/.bashrc</code></pre>
<center>
<img style="width:50%;"
    src="./img/iShot2021-05-19 10.37.27.png">
<br>
<div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">
图1. 显示singularity版本
</div>
</center>
<div id="参考" class="section level3">
<h3>参考</h3>
<p>[1]: [<a href="https://singularity.lbl.gov/index.html" class="uri">https://singularity.lbl.gov/index.html</a>]</p>
</div>
</div>
